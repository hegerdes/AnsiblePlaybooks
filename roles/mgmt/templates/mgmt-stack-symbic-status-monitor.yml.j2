version: '3.7'

services:
  symbic-status-monitor:
    image: {{ mgmt_status_monitor_image | default("gitlab-registry.***REMOVED***/servermgmt-tools/symbic-status-monitor:stable") }}
    hostname: {{ inventory_dir | basename }}-symbic-health-pulse
    env_file: {{ mgmt_dst_config_files }}mgmt-symbic-status-monitor/.env
    environment: [ TZ=Europe/Berlin ]
    networks:
      - {{ mgmt_docker_stack_name }}_mgmt_net
    volumes:
      - {{ mgmt_dst_config_files }}mgmt-symbic-status-monitor:/app/config
    deploy:
      placement:
        constraints:
          - "node.labels.mgmt==true"

networks:
  {{ mgmt_docker_stack_name }}_mgmt_net:
    external: true
