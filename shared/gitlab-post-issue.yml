- name: Create Git issue
  when: gitlab_conf.description is defined
  uri:
    url: '{{ gitlab_conf.url }}'
    method: '{{ gitlab_conf.method | default("POST") }}'
    body_format: form-multipart
    headers:
      PRIVATE-TOKEN: '{{ gitlab_conf.token }}'
    body:
      title: '{{ gitlab_conf.title }}'
      labels: '{{ gitlab_conf.labels | default("") }}'
      assignee_id: '{{ gitlab_conf.assignee_id | default("") | string }}'
      description: '{{ gitlab_conf.description }}'
    status_code: '{{ gitlab_conf.response_status | default(201)}}'
  ignore_errors: yes
  register: main_reop_issue_res
  tags: [maintenance, os-updates]
